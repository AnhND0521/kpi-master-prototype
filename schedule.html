<!DOCTYPE html>
<head>
    <title>KPI Master</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico?v=1">
</head>
<body>
    <div style="width: 1440px; height: 1024px; position: relative; background: white">
        <div id="monthly-schedule" style="width: 1104px; height: 1024px; left: 336px; top: 79px; position: absolute">
          <div id="calendar" style="width: 1104px; height: 749px; left: 0px; top: 196px; position: absolute">
            <div style="width: 158px; height: 150px; left: 0px; top: 0px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="width: 56px; left: 105px; top: 17px; position: absolute; color: rgba(0, 0, 0, 0.40); font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">29/4</div>
              <div style="width: 150px; height: 32px; left: 4px; top: 55px; position: absolute; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25); border-radius: 10px; overflow: hidden">
                <div style="width: 150px; height: 32px; left: 0px; top: 0px; position: absolute; background: #BBFFC2"></div>
                <div style="left: 30px; top: 7px; position: absolute; text-align: center; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">Công việc 1</div>
              </div>
            </div>
            <div style="width: 158px; height: 150px; left: 0px; top: 150px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 131px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">5</div>
            </div>
            <div style="width: 158px; height: 149px; left: 0px; top: 300px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 148px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">12</div>
            </div>
            <div style="width: 158px; height: 150px; left: 0px; top: 449px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">19</div>
            </div>
            <div style="width: 158px; height: 150px; left: 0px; top: 599px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">26</div>
            </div>
            <div style="width: 158px; height: 150px; left: 158px; top: 0px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="width: 63px; left: 101px; top: 17px; position: absolute; color: #603EBB; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">30/4</div>
              <div style="width: 41px; height: 0px; left: 102px; top: 43px; position: absolute; border: 2px #603EBB solid"></div>
              <div style="padding-top: 7px; padding-bottom: 6px; padding-left: 29px; padding-right: 30px; left: 4px; top: 54px; position: absolute; background: #CCDFFF; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25); border-radius: 10px; overflow: hidden; justify-content: center; align-items: center; display: inline-flex">
                <div style="text-align: center; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">Công việc 2</div>
              </div>
              <div style="padding-top: 7px; padding-bottom: 6px; padding-left: 28px; padding-right: 30px; left: 4px; top: 94px; position: absolute; background: #BBFFC2; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25); border-radius: 10px; overflow: hidden; justify-content: center; align-items: center; display: inline-flex">
                <div style="text-align: center; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">Công việc 3</div>
              </div>
            </div>
            <div style="width: 158px; height: 150px; left: 158px; top: 150px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 131px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">6</div>
            </div>
            <div style="width: 158px; height: 149px; left: 158px; top: 300px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 148px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">13</div>
            </div>
            <div style="width: 158px; height: 150px; left: 158px; top: 449px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">20</div>
            </div>
            <div style="width: 158px; height: 150px; left: 158px; top: 599px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">27</div>
            </div>
            <div style="width: 158px; height: 150px; left: 316px; top: 0px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 131px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">1</div>
            </div>
            <div style="width: 158px; height: 150px; left: 316px; top: 150px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 129px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">7</div>
            </div>
            <div style="width: 158px; height: 149px; left: 316px; top: 300px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 148px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">14</div>
              <div style="padding-top: 7px; padding-bottom: 6px; padding-left: 29px; padding-right: 30px; left: 4px; top: 43px; position: absolute; background: #DED4F3; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25); border-radius: 10px; overflow: hidden; justify-content: center; align-items: center; display: inline-flex">
                <div style="text-align: center; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">Công việc 5</div>
              </div>
            </div>
            <div style="width: 158px; height: 150px; left: 316px; top: 449px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">21</div>
            </div>
            <div style="width: 158px; height: 150px; left: 316px; top: 599px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">28</div>
            </div>
            <div style="width: 158px; height: 150px; left: 473px; top: 0px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 132px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">2</div>
            </div>
            <div style="width: 158px; height: 150px; left: 473px; top: 150px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 131px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">8</div>
            </div>
            <div style="width: 158px; height: 149px; left: 473px; top: 300px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 148px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 123px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">15</div>
            </div>
            <div style="width: 158px; height: 150px; left: 473px; top: 449px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">22</div>
            </div>
            <div style="width: 158px; height: 150px; left: 473px; top: 599px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">29</div>
            </div>
            <div style="width: 158px; height: 150px; left: 631px; top: 0px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 131px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">3</div>
            </div>
            <div style="width: 158px; height: 150px; left: 631px; top: 150px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 131px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">9</div>
              <div style="padding-top: 7px; padding-bottom: 6px; padding-left: 28px; padding-right: 30px; left: 4px; top: 43px; position: absolute; background: #DED4F3; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25); border-radius: 10px; overflow: hidden; justify-content: center; align-items: center; display: inline-flex">
                <div style="text-align: center; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">Công việc 4</div>
              </div>
            </div>
            <div style="width: 158px; height: 149px; left: 631px; top: 300px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 148px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">16</div>
            </div>
            <div style="width: 158px; height: 150px; left: 631px; top: 449px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">23</div>
            </div>
            <div style="width: 158px; height: 150px; left: 631px; top: 599px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">30</div>
            </div>
            <div style="width: 158px; height: 150px; left: 788px; top: 0px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 131px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">4</div>
            </div>
            <div style="width: 158px; height: 150px; left: 788px; top: 150px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">10</div>
            </div>
            <div style="width: 158px; height: 149px; left: 788px; top: 300px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 148px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">17</div>
            </div>
            <div style="width: 158px; height: 150px; left: 788px; top: 449px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">24</div>
            </div>
            <div style="width: 158px; height: 150px; left: 788px; top: 599px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">31</div>
            </div>
            <div style="width: 158px; height: 150px; left: 946px; top: 0px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 132px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">5</div>
            </div>
            <div style="width: 158px; height: 150px; left: 946px; top: 150px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 126px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">11</div>
            </div>
            <div style="width: 158px; height: 149px; left: 946px; top: 300px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 148px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 123px; top: 17px; position: absolute; text-align: right; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">18</div>
            </div>
            <div style="width: 158px; height: 150px; left: 946px; top: 449px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 120px; top: 17px; position: absolute; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">25</div>
            </div>
            <div style="width: 158px; height: 150px; left: 946px; top: 599px; position: absolute; border: 1px #D9D9D9 solid">
              <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute; background: white"></div>
              <div style="left: 116px; top: 17px; position: absolute; text-align: right; color: rgba(0, 0, 0, 0.40); font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">1/6</div>
            </div>
          </div>

          <!-- Schedule header -->
          <div style="width: 1104px; height: 38px; left: 0px; top: 158px; position: absolute; border-top: 1px #D9D9D9 solid">
            <div style="left: 60px; top: 8px; position: absolute; text-align: center; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Mon</div>
            <div style="left: 222px; top: 8px; position: absolute; text-align: center; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Tue</div>
            <div style="left: 373px; top: 8px; position: absolute; text-align: center; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Wed</div>
            <div style="left: 533px; top: 8px; position: absolute; text-align: center; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Thu</div>
            <div style="left: 697px; top: 8px; position: absolute; text-align: center; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Fri</div>
            <div style="left: 853px; top: 8px; position: absolute; text-align: center; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Sat</div>
            <div style="left: 1010px; top: 8px; position: absolute; text-align: center; color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Sun</div>
          </div>
          <div style="width: 172px; height: 24px; left: 466px; top: 113px; position: absolute">
            <div id="calendar-title" style="width: 138px; height: 24px; left: 23px; top: 0px; position: absolute; color: black; font-size: 18px; font-family: Arial; font-weight: 700; word-wrap: break-word">Tháng 5/2024</div>
            <div style="width: 9px; height: 16px; left: 150px; top: -2px; position: absolute; cursor: pointer;" onclick="nextMonth()">
              <img src="img/icon-right-arrow-black.png" width="12px">
            </div>
            <div style="width: 9px; height: 16px; left: 0px; top: -2px; position: absolute; cursor: pointer;" onclick="previousMonth()">
              <img src="img/icon-left-arrow-black.png" width="12px">
            </div>
          </div>
          <div style="width: 375px; height: 25px; left: 59px; top: 57px; position: absolute; color: black; font-size: 32px; font-family: Arial; font-weight: 500; word-wrap: break-word">Lịch trình</div>
          <div style="width: 196px; height: 40px; left: 872px; top: 103px; position: absolute; border-radius: 10px; overflow: hidden">
            <div style="width: 196px; height: 40px; left: 0px; top: 0px; position: absolute; background: #D9D9D9"></div>
            <div style="width: 98px; height: 40px; left: 98px; top: 0px; position: absolute">
              <div style="width: 90px; height: 32px; left: 4px; top: 4px; position: absolute; background: #7E56DA; border-radius: 10px"></div>
              <div style="left: 22px; top: 9px; position: absolute; text-align: center; color: white; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word; cursor: pointer;">Tháng</div>
            </div>
            <div style="padding-left: 28px; padding-right: 28px; padding-top: 9px; padding-bottom: 9px; left: 1px; top: 0px; position: absolute; justify-content: center; align-items: center; display: inline-flex; cursor: pointer;">
              <div style="color: #5E5E5E; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word" onclick="switchToWeeklySchedule()">Tuần</div>
            </div>
          </div>
        </div>


        <div class="modal-backdrop"></div>


        <!-- Schedule details pop-up -->
<div class="modal" id="details" style="position: fixed; top: 231px; left: 400px; width: 760px; height: 585px; background: white; box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.5); border-radius: 15px; overflow: auto;">
  <div style="align-self: stretch; height: 64px; padding-top: 20px; padding-bottom: 19px; padding-left: 51px; padding-right: 36px; background: #F9F5FF; border-bottom: 1px #D9D9D9 solid; justify-content: flex-end; align-items: flex-start; gap: 264px; display: inline-flex">
    <div style="width: 375px; height: 25px; color: black; font-size: 20px; font-family: Arial; font-weight: 400; word-wrap: break-word">Chi tiết</div>
    <div class="btn-close" style="width: 24px; height: 24px; position: relative; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: flex; cursor: pointer;">
    </div>
  </div>
  <div id="task-list" style="width: 750px; position: relative;">
    <div style="position: absolute; top: 31px; left: 56px; width: 326px; height: 35px; color: black; font-size: 24px; font-family: Arial; font-weight: 500; word-wrap: break-word">Thứ ba, ngày 30/04/2024</div>
    <div style="position: absolute; top: 99px; left: 56px; width: 647.57px; height: 77.35px; position: relative">
      <div style="width: 616.96px; height: 77.35px; left: 0px; top: 0px; position: absolute; background: #EBFFFD; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.10); border-radius: 50px"></div>
      <div style="width: 300.57px; height: 34.78px; left: 154px; top: 24px; position: absolute; color: #43A047; font-size: 22px; font-family: Arial; font-weight: 400; overflow: hidden; text-overflow: ellipsis;" title="Công việc 2">Công việc 2</div>
      <div style="width: 178px; height: 35px; left: 413px; top: 28px; position: absolute; text-align: right"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">Trong </span><span class="link" style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Nghiên cứu →</span></div>
      <img style="width: 30px; height: 30px; left: 102px; top: 23.90px; position: absolute" src="img/icon-check-filled.png" />
      <div style="width: 50px; height: 51px; left: 19px; top: 14px; position: absolute">
        <div style="width: 50px; height: 17px; left: 0px; top: 0px; position: absolute; text-align: center; color: rgba(0, 0, 0, 0.70); font-size: 14px; font-family: Arial; font-weight: 400; word-wrap: break-word">9:20</div>
        <div style="width: 50px; height: 17px; left: 0px; top: 34px; position: absolute; text-align: center; color: rgba(0, 0, 0, 0.70); font-size: 14px; font-family: Arial; font-weight: 400; word-wrap: break-word">11:45</div>
        <div style="width: 13px; height: 0px; left: 25px; top: 19px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; background: rgba(0, 0, 0, 0.70); border: 1px rgba(0, 0, 0, 0.70) solid"></div>
      </div>
      <div style="width: 63px; height: 0px; left: 80px; top: 8px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; border: 1px rgba(0, 0, 0, 0.40) solid"></div>
    </div>
    <div style="position: absolute; top: 196px; left: 56px; width: 647.57px; height: 77.35px; position: relative">
      <div style="width: 616.96px; height: 77.35px; left: 0px; top: 0px; position: absolute; background: #EBFFFD; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.10); border-radius: 50px"></div>
      <div style="width: 493.57px; height: 34.78px; left: 154px; top: 22px; position: absolute; color: #1A2022; font-size: 24px; font-family: Arial; font-weight: 400; word-wrap: break-word">Công việc 2</div>
      <div style="width: 178px; height: 35px; left: 413px; top: 22px; position: absolute; text-align: right"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">Trong </span><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Giảng dạy →</span></div>
      <div style="width: 30px; height: 30px; left: 102px; top: 23.90px; position: absolute; border-radius: 9999px; border: 1px black solid"></div>
      <div style="width: 50px; height: 51px; left: 19px; top: 14px; position: absolute">
        <div style="width: 50px; height: 17px; left: 0px; top: 0px; position: absolute; text-align: center; color: rgba(0, 0, 0, 0.70); font-size: 14px; font-family: Arial; font-weight: 400; word-wrap: break-word">14:10</div>
        <div style="width: 50px; height: 17px; left: 0px; top: 34px; position: absolute; text-align: center; color: rgba(0, 0, 0, 0.70); font-size: 14px; font-family: Arial; font-weight: 400; word-wrap: break-word">17:30</div>
        <div style="width: 13px; height: 0px; left: 25px; top: 19px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; background: rgba(0, 0, 0, 0.70); border: 1px rgba(0, 0, 0, 0.70) solid"></div>
      </div>
      <div style="width: 63px; height: 0px; left: 80px; top: 8px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; border: 1px rgba(0, 0, 0, 0.40) solid"></div>
    </div>
  </div>
</div>

<!-- Weekly schedule -->
<div id="weekly-schedule" style="width: 1104px; height: 1024px; left: 336px; top: 79px; position: absolute">
  <div id="" style="width: 1038px; height: 718px; left: 66px; top: 227px; position: absolute">
    <div style="width: 1038px; height: 718px; left: 0px; top: 0px; position: absolute">
      <div style="width: 778px; height: 0px; left: 148px; top: 0px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 778px; height: 0px; left: 297px; top: 0px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 778px; height: 0px; left: 445px; top: 0px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 778px; height: 0px; left: 593px; top: 0px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 778px; height: 0px; left: 741px; top: 0px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 778px; height: 0px; left: 890px; top: 0px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 61px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 121px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 181px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 240px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 300px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 360px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 420px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 480px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 540px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 599px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 659px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
      <div style="width: 1038px; height: 0px; left: 0px; top: 719px; position: absolute; border: 1px rgba(217, 217, 217, 0.50) solid"></div>
    </div>
    <div id="tasks" style="width: 738px; height: 546px; left: 2px; top: 85px; position: absolute">
      <a href="kpi-details.html?id=1">
        <div style="width: 145px; height: 198px; left: 0px; top: 0px; position: absolute; border-radius: 10px; overflow: hidden">
          <div style="width: 145px; height: 198px; left: 0px; top: 0px; position: absolute; background: #BBFFC2"></div>
          <div style="left: 16px; top: 8px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">8:30 - 11:45</div>
          <div style="left: 16px; top: 31px; position: absolute; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">IT4110</div>
          <div style="left: 16px; top: 51px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">Giảng dạy</div>
          <div style="width: 8px; height: 190px; left: 4px; top: 4px; position: absolute; background: #34A853; border-radius: 10px"></div>
        </div>
      </a>
      <div style="width: 145px; height: 195px; left: 148px; top: 351px; position: absolute; border-radius: 10px; overflow: hidden">
        <div style="width: 145px; height: 195px; left: 0px; top: 0px; position: absolute; background: #BBFFC2"></div>
        <div style="left: 16px; top: 8px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">2:15 - 5:30</div>
        <div style="left: 16px; top: 31px; position: absolute; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">IT4321</div>
        <div style="left: 16px; top: 51px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">Giảng dạy</div>
        <div style="width: 8px; height: 187px; left: 4px; top: 4px; position: absolute; background: #34A853; border-radius: 10px"></div>
      </div>
      <div style="width: 145px; height: 92px; left: 445px; top: 454px; position: absolute; border-radius: 10px; overflow: hidden">
        <div style="width: 145px; height: 92px; left: 0px; top: 0px; position: absolute; background: #BBFFC2"></div>
        <div style="left: 16px; top: 8px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">4:00 - 5:30</div>
        <div style="left: 16px; top: 31px; position: absolute; color: black; font-size: 16px; font-family: Arial; font-weight: 700; word-wrap: break-word">IT2214</div>
        <div style="left: 16px; top: 51px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">Giảng dạy</div>
        <div style="width: 8px; height: 84px; left: 4px; top: 4px; position: absolute; background: #34A853; border-radius: 10px"></div>
      </div>
      <a href="kpi-details.html?id=2">
        <div style="width: 145px; height: 179px; left: 148px; top: 35px; position: absolute; border-radius: 10px; overflow: hidden">
          <div style="width: 145px; height: 179px; left: 0px; top: 0px; position: absolute; background: #CCDFFF"></div>
          <div style="left: 16px; top: 8px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">9:00 - 12:30</div>
          <div style="left: 16px; top: 31px; position: absolute; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">Viết báo cáo</div>
          <div style="left: 16px; top: 51px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">Nghiên cứu</div>
          <div style="width: 8px; height: 171px; left: 4px; top: 4px; position: absolute; background: #679CF5; border-radius: 10px"></div>
        </div>
      </a>
      <div style="width: 145px; height: 212px; left: 445px; top: 241px; position: absolute; border-radius: 10px; overflow: hidden">
        <div style="width: 145px; height: 212px; left: 0px; top: 0px; position: absolute; background: #CCDFFF"></div>
        <div style="left: 16px; top: 8px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">12:30 - 4:00</div>
        <div style="left: 16px; top: 31px; position: absolute; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">Nghiên cứu về<br/>vượn Đông Á</div>
        <div style="left: 16px; top: 69px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">Nghiên cứu</div>
        <div style="width: 8px; height: 204px; left: 4px; top: 4px; position: absolute; background: #679CF5; border-radius: 10px"></div>
      </div>
      <div style="width: 145px; height: 88px; left: 593px; top: 184px; position: absolute; border-radius: 10px; overflow: hidden">
        <div style="width: 145px; height: 88px; left: 0px; top: 0px; position: absolute; background: #DED4F3"></div>
        <div style="left: 16px; top: 8px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">11:30 - 1:00</div>
        <div style="left: 16px; top: 31px; position: absolute; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">Lunch Seminar</div>
        <div style="left: 16px; top: 50px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">Phục vụ</div>
        <div style="width: 8px; height: 80px; left: 4px; top: 4px; position: absolute; background: #9974E8; border-radius: 10px"></div>
      </div>
      <div style="width: 145px; height: 88px; left: 297px; top: 184px; position: absolute; border-radius: 10px; overflow: hidden">
        <div style="width: 145px; height: 88px; left: 0px; top: 0px; position: absolute; background: #DED4F3"></div>
        <div style="left: 16px; top: 8px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">11:30 - 1:00</div>
        <div style="left: 16px; top: 31px; position: absolute; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word">Lunch Seminar</div>
        <div style="left: 16px; top: 50px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">Phục vụ</div>
        <div style="width: 8px; height: 80px; left: 4px; top: 4px; position: absolute; background: #9974E8; border-radius: 10px"></div>
      </div>
    </div>
  </div>
  <div id="weekdays" style="width: 1038px; height: 69px; left: 66px; top: 158px; position: absolute; border-top: 1px rgba(217, 217, 217, 0.50) solid; border-bottom: 1px rgba(217, 217, 217, 0.50) solid">
    <div style="left: 55px; top: 8px; position: absolute; text-align: center"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Mon<br/></span><span style="color: #7E56DA; font-size: 24px; font-family: Arial; font-weight: 600; word-wrap: break-word">13</span></div>
    <div style="left: 208px; top: 8px; position: absolute; text-align: center"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Tue<br/></span><span style="color: #7E56DA; font-size: 24px; font-family: Arial; font-weight: 600; word-wrap: break-word">14</span></div>
    <div style="left: 350px; top: 8px; position: absolute; text-align: center"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Wed<br/></span><span style="color: #7E56DA; font-size: 24px; font-family: Arial; font-weight: 600; word-wrap: break-word">15</span></div>
    <div style="left: 500px; top: 8px; position: absolute; text-align: center"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Thu<br/></span><span style="color: #7E56DA; font-size: 24px; font-family: Arial; font-weight: 600; word-wrap: break-word">16</span></div>
    <div style="left: 652px; top: 8px; position: absolute; text-align: center"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Fri<br/></span><span style="color: #7E56DA; font-size: 24px; font-family: Arial; font-weight: 600; word-wrap: break-word">17</span></div>
    <div style="left: 801px; top: 8px; position: absolute; text-align: center"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Sat<br/></span><span style="color: #7E56DA; font-size: 24px; font-family: Arial; font-weight: 600; word-wrap: break-word">18</span></div>
    <div style="left: 949px; top: 8px; position: absolute; text-align: center"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">Sun<br/></span><span style="color: #7E56DA; font-size: 24px; font-family: Arial; font-weight: 600; word-wrap: break-word">19</span></div>
  </div>
  <div style="width: 65px; height: 782px; left: 1px; top: 227px; position: absolute; border-top: 1px rgba(217, 217, 217, 0.50) solid; border-right: 1px rgba(217, 217, 217, 0.50) solid">
    <div style="left: 20px; top: 4px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">6 AM</div>
    <div style="left: 19px; top: 64px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">7 AM</div>
    <div style="left: 19px; top: 124px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">8 AM</div>
    <div style="left: 19px; top: 184px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">9 AM</div>
    <div style="left: 13px; top: 243px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">10 AM</div>
    <div style="left: 12px; top: 303px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">11 AM</div>
    <div style="left: 11px; top: 363px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">12 PM</div>
    <div style="left: 20px; top: 423px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">1 PM</div>
    <div style="left: 19px; top: 483px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">2 PM</div>
    <div style="left: 19px; top: 544px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">3 PM</div>
    <div style="left: 20px; top: 602px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">4 PM</div>
    <div style="left: 20px; top: 662px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">5 PM</div>
    <div style="left: 20px; top: 722px; position: absolute; text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">6 PM</div>
  </div>
  <div style="width: 172px; height: 24px; left: 466px; top: 113px; position: absolute">
    <div id="week-title" style="width: 138px; height: 24px; left: 13px; top: 0px; position: absolute; text-align: center; color: black; font-size: 18px; font-family: Arial; font-weight: 700; word-wrap: break-word">13 - 19/5/2024</div>
    <div style="width: 9px; height: 16px; left: 150px; top: -2px; position: absolute; cursor: pointer;" onclick="nextWeek()">
      <img src="img/icon-right-arrow-black.png" width="12px">
    </div>
    <div style="width: 9px; height: 16px; left: 0px; top: -2px; position: absolute; cursor: pointer;" onclick="previousWeek()">
      <img src="img/icon-left-arrow-black.png" width="12px">
    </div>
  </div>
  <div style="width: 375px; height: 25px; left: 59px; top: 57px; position: absolute; color: black; font-size: 32px; font-family: Arial; font-weight: 500; word-wrap: break-word">Lịch trình</div>
  <div style="width: 65px; padding-left: 5px; padding-right: 5px; left: 1px; top: 158px; position: absolute; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); border-top: 1px rgba(217, 217, 217, 0.50) solid; flex-direction: column; justify-content: center; align-items: center; display: inline-flex">
    <div style="text-align: right; color: #7C7474; font-size: 16px; font-family: Arial; font-weight: 400; word-wrap: break-word">GMT+7</div>
  </div>
  <div style="width: 196px; height: 40px; left: 872px; top: 103px; position: absolute; border-radius: 10px; overflow: hidden">
    <div style="width: 196px; height: 40px; left: 0px; top: 0px; position: absolute; background: #D9D9D9"></div>
    <!-- <a href="/schedulemonth.html"> -->
      <div style="padding-left: 22px; padding-right: 22px; padding-top: 9px; padding-bottom: 9px; left: 98px; top: 0px; position: absolute; justify-content: center; align-items: center; display: inline-flex">
        <div style="text-align: center; color: #5E5E5E; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word; cursor: pointer;" onclick="switchToMonthlySchedule()">Tháng</div>
      </div>
    <!-- </a> -->
    <!-- <a href="/scheduleweek.html"> -->
      <div style="width: 98px; height: 40px; left: 1px; top: 0px; position: absolute">
        <div style="width: 90px; height: 32px; left: 4px; top: 4px; position: absolute; background: #7E56DA; border-radius: 10px"></div>
        <div style="left: 28px; top: 9px; position: absolute; color: white; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word; cursor: pointer;">Tuần</div>
      </div>
    <!-- </a> -->
    </div>
  </div>


      <!-- Side bar -->
        <div style="width: 336px; height: 1024px; left: 0px; top: 79px; position: fixed; opacity: 0.80; background: #078D70; z-index: 1;">
            <div style="width: 336px; height: 1024px; left: 0px; top: 0px; position: absolute; background: #F5F5F5;  box-shadow: 1px 0px 8px rgba(0, 0, 0, 0.25)"></div>
            <div class="nav-link" id="nav-kpi-list" style="width: 336px; height: 72px; left: 0px; top: 88px; position: absolute">
                <div style="width: 312px; height: 56px; left: 12px; top: 8px; position: absolute; border-radius: 10px"></div>
                <img style="width: 24px; height: 24px; left: 25px; top: 24px; position: absolute" src="img/icon-kpi-list.png" />
                <div style="left: 61px; top: 25px; position: absolute; color: black; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">Danh sách KPI</div>
            </div>
            <div class="nav-link" id="nav-schedule" style="width: 336px; height: 72px; left: 0px; top: 160px; position: absolute; background: #F8E4FF">
                <div style="width: 312px; height: 56px; left: 12px; top: 8px; position: absolute; border-radius: 10px"></div>
                <div style="left: 61px; top: 25px; position: absolute; color: #603EBB; font-size: 18px; font-family: Arial; font-weight: 700; word-wrap: break-word">Lịch trình</div>
                <img style="width: 24px; height: 24px; left: 25px; top: 24px; position: absolute" src="img/icon-schedule-active.png" />
            </div>
            <div class="nav-link" id="nav-home" style="width: 336px; height: 72px; left: 0px; top: 16px; position: absolute">
                <div style="width: 312px; height: 56px; left: 12px; top: 8px; position: absolute; border-radius: 10px"></div>
                <div style="left: 61px; top: 25px; position: absolute; color: black; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">Trang chủ</div>
                <img style="width: 28px; height: 28px; left: 22px; top: 19px; position: absolute" src="img/icon-home.png" />
            </div>
            <div class="nav-link" id="nav-noti" style="width: 336px; height: 72px; left: 0px; top: 232px; position: absolute">
                <div style="width: 312px; height: 56px; left: 12px; top: 8px; position: absolute; border-radius: 10px"></div>
                <div style="left: 61px; top: 25px; position: absolute; color: black; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">Thông báo</div>
                <img style="width: 30px; height: 30px; left: 22px; top: 21px; position: absolute" src="img/icon-notification.png" />
                <div style="width: 24px; height: 24px; left: 162px; top: 24px; position: absolute">
                    <div style="width: 24px; height: 24px; left: 0px; top: 0px; position: absolute; background: #7E56DA; border-radius: 5px"></div>
                    <div style="left: 7px; top: 2px; position: absolute; text-align: center; color: white; font-size: 16px; font-family: Arial; font-weight: 700; word-wrap: break-word">2</div>
                </div>
            </div>
            <div class="nav-link" id="nav-settings" style="width: 336px; height: 72px; left: 0px; top: 304px; position: absolute">
                <div style="width: 312px; height: 56px; left: 12px; top: 8px; position: absolute; border-radius: 10px"></div>
                <div style="left: 61px; top: 25px; position: absolute; color: black; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">Cài đặt</div>
                <img style="width: 24px; height: 23.98px; left: 25px; top: 24px; position: absolute" src="img/icon-settings.png" />
            </div>
          </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="data.js"></script>
    <script src="common.js"></script>
    <script>
        setHeader();

        const now = new Date();
        const calendar = $("#calendar");

        const tasks = getAllTasks();

        function getTasksByDate(date) {
            return tasks.filter(t => t.date.getFullYear() === date.getFullYear() && t.date.getMonth() === date.getMonth() && t.date.getDate() === date.getDate());
        }

        function renderCalendar() {
            calendar.empty();
            const date = new Date(now.getFullYear(), now.getMonth(), 1);
            while (date.getDay() !== 1) {
                console.log(date);
                date.setTime(date.getTime() - 24*3600*1000);
            }
            console.log(date);

            let i = 0, j = 0;
            for (let i=0; i<6; i++) {
                for (let j=0; j<7; j++) {
                    const cell = $(`<div class="calendar-cell" date="${date.getFullYear()}-${date.getMonth()+1<10?'0':''}${date.getMonth()+1}-${date.getDate()<10?'0':''}${date.getDate()}" style="left: ${158*j}px; top: ${150*i}px; position: absolute;" onclick="viewDetails(event)">
                        <div style="width: 158px; height: 149px; left: 0px; top: 1px; position: absolute;"></div>
                        <div style="width: 40px; left: 100px; top: 17px; position: absolute; color: ${date.getMonth() !== now.getMonth() ? 'rgba(0, 0, 0, 0.40)' : '#7E56DA'}; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word; text-align: right" class="text-end">${date.getDate() + (date.getMonth() !== now.getMonth() ? '/' + (date.getMonth() + 1) : '')}</div>
                        ${date.getDate() === new Date().getDate() && date.getMonth() === new Date().getMonth() ? `<div style="width: 30px; height: 0px; left: 115px; top: 43px; position: absolute; border: 2px #603EBB solid"></div>` : ''}
                    </div>`)

                    const tasksByDate = getTasksByDate(date);
                    let y = 54, inc = 45;
                    tasksByDate.forEach(t => {
                        cell.append($(`<div style="width: 150px; height: 36px; padding-top: 7px; padding-bottom: 6px; padding-left: 29px; padding-right: 30px; left: 4px; top: ${y}px; position: absolute; background: ${t.id.startsWith('1')?'#BBFFC2':t.id.startsWith('2')?'#CCDFFF':'#DED4F3'}; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25); border-radius: 10px; overflow: hidden; justify-content: center; display: inline-flex" title="${t.name}">
                            <div style="width: 150px; height: 36px; text-align: center; color: black; font-size: 16px; font-family: Arial; font-weight: 500; overflow: hidden; text-overflow: ellipsis"}>${t.name}</div>
                        </div>`));
                        y += inc;
                    })

                    calendar.append(cell);

                    date.setTime(date.getTime() + 24*3600*1000);
                }
                if (date.getMonth() > now.getMonth() || date.getFullYear() > now.getFullYear()) break;
            }
        }

        renderCalendar();

        function previousMonth() {
            if (now.getMonth() === 0) {
                now.setFullYear(now.getFullYear() - 1);
                now.setMonth(11);
            } else {
                now.setMonth(now.getMonth() - 1);
            }

            $("#calendar-title").text(`Tháng ${now.getMonth() + 1}/${now.getFullYear()}`);

            renderCalendar();
        }

        function nextMonth() {
            if (now.getMonth() === 11) {
                now.setFullYear(now.getFullYear() + 1);
                now.setMonth(0);
            } else {
                now.setMonth(now.getMonth() + 1);
            }

            $("#calendar-title").text(`Tháng ${now.getMonth() + 1}/${now.getFullYear()}`);

            renderCalendar();
        }

        function viewDetails(event) {
            const date = new Date($(event.target.parentNode).attr("date") || $(event.target.parentNode.parentNode).attr("date"));
            console.log(date);
            openDetailsPopUp(date);
        }

        function openDetailsPopUp(date) {
            $(".modal-backdrop").show();
            $("#details").show();
            $("#task-list").empty();
            
            const weekdayName = ['Chủ nhật', 'Thứ hai', 'Thứ ba', 'Thứ tư', 'Thứ năm', 'Thứ sáu', 'Thứ bảy'];
            $("#task-list").append($(`<div style="position: absolute; top: 31px; left: 56px; width: 326px; height: 35px; color: black; font-size: 24px; font-family: Arial; font-weight: 500; word-wrap: break-word">${weekdayName[date.getDay()]}, ngày ${date.getDate()}/${date.getMonth()+1}/${date.getFullYear()}</div>`));

            const tasks = getTasksByDate(date);
            console.log(tasks);
            if (tasks.length === 0) {
              $("#task-list").append($(`<div style="position: absolute; top: 99px; left: 56px; width: 647.57px; height: 77.35px; position: relative; font-size: 16px; font-family: Arial; font-weight: 400; color: black">Không có nhiệm vụ nào.</div>`));
            }
            let y = 99, inc = 20;
            tasks.forEach(t => {
                const kpi = findKpiById(t.id.split('.')[0]);
                console.log(kpi);
                $("#task-list").append($(`<div style="position: absolute; top: ${y}px; left: 56px; width: 647.57px; height: 77.35px; position: relative">
      <div style="width: 616.96px; height: 77.35px; left: 0px; top: 0px; position: absolute; background: #EBFFFD; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.10); border-radius: 50px"></div>
      <div style="width: 300.57px; height: 34.78px; left: 154px; top: 24px; position: absolute; color: ${t.status === 1 ? '#43A047' : t.status === 0 ? 'black' : '#0A840A'}; font-size: 22px; font-family: Arial; font-weight: 400; overflow: hidden; text-overflow: ellipsis;" title="${t.name}">${t.name}</div>
      <div style="width: 178px; height: 35px; left: 413px; top: 28px; position: absolute; text-align: right"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 400; word-wrap: break-word">Trong </span><span class="link" onclick="navigateTo('kpi-details.html?id=${kpi.id}')" style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">${kpi.name} →</span></div>
      ${t.status === 1 ? `<img class="task-check" style="width: 30px; height: 30px; left: 102px; top: 23.90px; position: absolute" src="img/icon-check-filled.png" />` : `<div class="task-check" style="width: 30px; height: 30px; left: 102px; top: 23.90px; position: absolute;"></div>`}
      <div style="width: 50px; height: 51px; left: 19px; top: 14px; position: absolute">
        <div style="width: 50px; height: 17px; left: 0px; top: 0px; position: absolute; text-align: center; color: rgba(0, 0, 0, 0.70); font-size: 14px; font-family: Arial; font-weight: 400; word-wrap: break-word">${t.start}</div>
        <div style="width: 50px; height: 17px; left: 0px; top: 34px; position: absolute; text-align: center; color: rgba(0, 0, 0, 0.70); font-size: 14px; font-family: Arial; font-weight: 400; word-wrap: break-word">${t.end}</div>
        <div style="width: 13px; height: 0px; left: 25px; top: 19px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; background: rgba(0, 0, 0, 0.70); border: 1px rgba(0, 0, 0, 0.70) solid"></div>
      </div>
      <div style="width: 63px; height: 0px; left: 80px; top: 8px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; border: 1px rgba(0, 0, 0, 0.40) solid"></div>
    </div>`));
                y += inc;
            });
        }

        function closeModal() {
            $(".modal-backdrop").hide();
            $(".modal").hide();
        }

        $(".btn-close,.modal-backdrop").click(closeModal);

        function navigateTo(url) {
            window.location.href = url;
        }


        function switchToWeeklySchedule() {
          $("#monthly-schedule").hide();
          $("#weekly-schedule").show();
          now.setTime(new Date().getTime());
          renderWeekCalendar();
        }

        function switchToMonthlySchedule() {
          $("#monthly-schedule").show();
          $("#weekly-schedule").hide();
          now.setTime(new Date().getTime());
          renderCalendar();
        }

        switchToWeeklySchedule();

        function renderWeekCalendar() {
          let dateRange = [now];
          let date = new Date(now.getTime());
          while (date.getDay() !== 1) {
            date.setTime(date.getTime() - 24*3600*1000);
            dateRange = [new Date(date.getTime()), ...dateRange];
          }
          date = new Date(now.getTime());
          while (date.getDay() !== 0) {
            date.setTime(date.getTime() + 24*3600*1000);
            dateRange = [...dateRange, new Date(date.getTime())];
          }

          console.log(dateRange);

          const firstDay = dateRange[0];
          const lastDay = dateRange[6];
          $("#week-title").text(`${firstDay.getDate()}${firstDay.getMonth() !== lastDay.getMonth() ? '/' + (firstDay.getMonth()+1) : ''} - ${lastDay.getDate()}/${lastDay.getMonth()+1}/${lastDay.getFullYear()}`)

          let y = 55, inc = 153;
          const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
          $("#weekdays").empty();
          $("#tasks").empty();
          dateRange.forEach((d,i) => {
            $("#weekdays").append($(`<div style="left: ${y}px; top: 8px; position: absolute; text-align: center"><span style="color: #7E56DA; font-size: 18px; font-family: Arial; font-weight: 600; word-wrap: break-word">${daysOfWeek[d.getDay()]}<br/></span><span style="color: #7E56DA; font-size: 24px; font-family: Arial; font-weight: 600; word-wrap: break-word">${d.getDate()}${d.getMonth()!==date.getMonth() ? '/' + (d.getMonth()+1) : ''}</span></div>`));
            y += inc;

            let tasks = getTasksByDate(d);
            // console.log(tasks);
            let offset = -85;
            let gap = 60;
            tasks.forEach(t => {
              console.log(t);
              let startOffset = getDuration('6:00', t.start);
              let durationHeight = getDuration(t.start, t.end);
              let kpiId = +t.id.split('.')[0];
              $("#tasks").append($(`<div style="width: 145px; height: ${durationHeight}px; left: ${148*i}px; top: ${offset + startOffset}px; position: absolute; border-radius: 10px; overflow: hidden; cursor: pointer" onclick="openDetailsPopUp(new Date(${d.getTime()}))">
                <div style="width: 145px; height: 198px; left: 0px; top: 0px; position: absolute; background: ${kpiId===1?'#BBFFC2':kpiId===2?'#CCDFFF':'#DED4F3'}"></div>
                <div style="left: 16px; top: 8px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">${t.start} - ${t.end}</div>
                <div style="left: 16px; top: 31px; position: absolute; color: black; font-size: 16px; font-family: Arial; font-weight: 500; word-wrap: break-word; padding-right: 5px">${t.name}</div>
                <!-- <div style="left: 16px; top: 51px; position: absolute; color: #5E5E5E; font-size: 12px; font-family: Arial; font-weight: 400; word-wrap: break-word">Giảng dạy</div> -->
                <div style="width: 8px; height: 190px; left: 4px; top: 4px; position: absolute; background: ${kpiId===1?'#34A853':kpiId===2?'#679CF5':'#9974E8'}; border-radius: 10px"></div>
              </div>`));
            });
          });
        }

        function getDuration(start, end) {
          let t1 = start.split(':');
          let h1 = +t1[0], m1 = +t1[1];
          let t2 = end.split(':');
          let h2 = +t2[0], m2 = +t2[1];
          return (h2-h1)*60 + (m2-m1);
        } 

        function previousWeek() {
          now.setTime(now.getTime() - 7*24*3600*1000);
          renderWeekCalendar();
        }

        function nextWeek() {
          now.setTime(now.getTime() + 7*24*3600*1000);
          renderWeekCalendar();
        }
        
    </script>
</body>
